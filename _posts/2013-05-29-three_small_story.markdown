---
layout: post
title: 开发小记三则
category: Code
---


# 和人交流，容易产生新想法

最近有一个问题一直困扰着我，如何让jwplayer显示正在播放文件的信息。

背景： jwplayer播放smtp流，此流由第三方提供，依次按照list播放。

目的： 当jwplayer播放某个视频文件时，显示对应的文件信息。

解决过程：

- 最先想到的就是jwplayer的playlist参数，此参数记录jwplayer播放的文件或者文件列表以及文件的详细信息，这个文件可以是xml文件，也可以是其他格式。于是google上狂搜jwplayer playlist smtp, 都没有得到完美的答案，要么是介绍playlist的使用，要么是介绍smtp流的使用，把二者集合到一起的也需要smtp server和playlist在同一台服务器，对于本人，smtp server上不可能放置playlist。就这个结论花了两天的时间。

- 无奈，只好求助朋友，给7打电话，讨论这个问题，和他的讨论让我思路清晰。目前只能在自己的服务器解析playlist并显示。可是什么时候显示呢？浏览器什么时候请求数据？还是服务器不断的推送数据？另外还有可能有一种不同步的问题，来自自己服务的列表，和第三方服务器的列表不同步。

- 最终用了js的setTimeout方法，在第一次请求时，得到下一次请求的时间，用setTimeout来设置定时任务，让请求循环下去。

# 张弛有度，效果更佳

为了找到一个关于点击图片实现放大显示的js代码，花了一天的时间还是没有满意的结果，最后只好搁置。第二天早晨接着做这件事，没想到半个小时搞定。也许是量变到质变，也许是休息了一晚脑子开动了。

总之，如果技术上的事，如果超过半天还没有合适的方案，要么和别人讨论，要么休息调整一下思路。

# 持续改进

首先让代码完成任务，三分钟后，优化代码，真的controller中method的代码不宜超过3行。